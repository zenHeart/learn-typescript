# 对象类型-类
本章详细讲解 TypeScript 基于 class 的对象类型限制。
在开始之前建议阅读 [MDN class](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Classes) 了解类的基本使用。

## 类的申明
es6 新增了采用 `class` 语法定义类的功能。
在 TypeScript `class` 申明同时创建了基于该类的对象类型。

<<< ./examples/types/class/basic.ts{4}

注意标黑语句,它属于 TypeScript 扩充特性,显示申明类的属性类型。
将上述内容复制到 `index.ts` 设定 `target` 为 `es5` 或 `es6` 看一下输出差异。

```bash
# 编译结果为 es5 语法,输出文件名为 index.es5.js 输出采用构造器函数表示类
tsc index.ts --target es5 --outFile index.es5.js

# 编译结果为 es6 语法,输出文件名为 index.es6.js 采用类语法,输出删除了加黑部分非 JavaScript 的语法
tsc index.ts --target es6 --outFile index.es6.js
```

## 访问控制
类的成员包含方法和属性。在面向对象编程中一个常见的概念,叫做[访问控制](https://en.wikipedia.org/wiki/Access_control#In_object-oriented_programming),它用于控制类的成员在类,子类和对象实例中的访问权限。 TypeScript 引入了此特性。通常在属性或方法前采用 `public, private, protected` 来申明限制,它们对类,子类,和对象实例在访问属性或方法的限制如下表:


| 访问类型  | 类                 | 子类   | 对象和子对象 |
| :-------- | :----------------- | :----- | :----------- |
| public    | 可以引用属性和方法 | 可以   | 可以         |
| protected | 可以               | 可以   | 不可以       |
| private   | 可以               | 不可以 | 不可以       |

在 JavaScript 中采用类语法申明的属性和方法均为 public 类型,由于 `public` 为默认行为不赘述, 下面着重讲解 `protected,private` 的使用

### protected
protected 限制属性和方法只能在类及对应的子类中访问。

<<< ./examples/types/class/access-control-protected.ts

在 es6 中可以使用

### private
private 限制属性和方法只能在类中访问,子类和实例均不可以。 

<<< ./examples/types/class/access-control-private.ts

:::tip
JavaScript 类没有 private 控制,默认风格是在方法或属性名前使用 `_` 表示私有属性或方法,你可以在 TypeScript 保留此风格。
:::

TypeScript 于 3.8 加入了进入提案状态的 [private](https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-8.html#-ecmascript-private-fields) 语法。采用 `#` 标识和使用私有变量。

<<< ./examples/types/class/access-control-private-ECMAScript.ts

:::tip
VSCode 参看 [Using newer TypeScript versions](https://code.visualstudio.com/docs/typescript/typescript-compiling#_using-newer-typescript-versions) 更新编辑器的 TypeScript。避免版本问题,导致不支持新特性。
:::

## 只读属性和可选属性
之前讲过可使用 [属性修饰](./3.2.builtin-literal-object.md#属性修饰) 限制属性为只读或可选,在申明类中也可使用此特性。

<<< ./examples/types/class/readonly.ts


你可以结合访问控制与属性修饰设置类。

